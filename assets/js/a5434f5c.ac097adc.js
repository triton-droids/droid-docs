"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4496],{7742:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var t=i(4848),l=i(8453),s=i(4769);const o={sidebar_position:1},r="Installation",a={id:"developers/agent/installing",title:"Installation",description:"This is an advanced reference guide of alternate install methods for",source:"@site/docs/developers/agent/installing.md",sourceDirName:"developers/agent",slug:"/developers/agent/installing",permalink:"/droid-docs/developers/agent/installing",draft:!1,unlisted:!1,editUrl:"https://github.com/triton-droids/droid-docs/tree/main/docs/developers/agent/installing.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Development Environment Setup",permalink:"/droid-docs/developers/development"},next:{title:"Configuration",permalink:"/droid-docs/developers/agent/configuring"}},d={},c=[{value:"Automatic one-line installation script",id:"automatic-one-line-installation-script",level:2},{value:"Optional URL parameters",id:"optional-url-parameters",level:3},{value:"Installing from source code",id:"installing-from-source-code",level:2},{value:"Integrate into an existing Yocto Project image",id:"integrate-into-an-existing-yocto-project-image",level:2},{value:"Optional variables",id:"optional-variables",level:3},{value:"Supported Yocto releases",id:"supported-yocto-releases",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"installation",children:"Installation"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["This is an advanced reference guide of alternate install methods for\ndevelopers and integrators. If you are end-user\nsee ",(0,t.jsx)(n.a,{href:"/user-guides/devices/adding",children:"Adding a device"}),"."]})}),"\n",(0,t.jsxs)(n.p,{children:["We offer different ways to install the ShellHub Agent.\nThe easiest way is with our ",(0,t.jsx)(n.a,{href:"#automatic-one-line-installation-script",children:"automatic one-line installation script"}),",\nwhich works with all major Linux distributions but it requires that you have Docker installed and properly set up."]}),"\n",(0,t.jsx)(n.p,{children:"If you want to install ShellHub Agent without Docker, currently we have two other options:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#installing-from-source-code",children:"Installing from source code"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#integrate-into-an-existing-yocto-project-image",children:"Integrate into an existing Yocto Project image"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"automatic-one-line-installation-script",children:"Automatic one-line installation script"}),"\n",(0,t.jsx)(n.admonition,{title:"Prerequisites",type:"note",children:(0,t.jsxs)(n.p,{children:["Docker installed and properly set up on device is required.\nFollow the ",(0,t.jsx)(n.a,{href:"http://docs.docker.com/installation/",children:"Docker Install Instructions"})," for your distro/platform.\nYou should always use the latest docker version. The minimum supported Docker version is ",(0,t.jsx)(n.code,{children:"18.06"}),"."]})}),"\n",(0,t.jsx)(n.p,{children:"To install ShellHub Agent run the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sh <(curl -Ss http://<SERVER-ADDRESS>/install.sh?tenant_id=<TENANT-ID>)\n"})}),"\n",(0,t.jsx)(n.p,{children:"Where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<SERVER-ADDRESS>"}),": is the ShellHub instance server address"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<TENANT-ID>"}),": is the Tenant ID of your account"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"optional-url-parameters",children:"Optional URL parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"keepalive_interval"}),": Specifies in seconds the keep alive message interval"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"preferred_hostname"}),": The preferred hostname to use rather than generated value from ethernet MAC address"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"installing-from-source-code",children:"Installing from source code"}),"\n",(0,t.jsx)(n.admonition,{title:"Prerequisites",type:"note",children:(0,t.jsxs)(n.p,{children:["ShellHub Agent requires Go 1.18 to compile, please refer to the ",(0,t.jsx)(n.a,{href:"https://golang.org/doc/install",children:"official documentation"})," for how to install Go in your system."]})}),"\n",(0,t.jsxs)("p",{children:["First checkout the latest stable version (",(0,t.jsx)("strong",{children:s.$.version}),") of ShellHub as follows:"]}),"\n",(0,t.jsx)("pre",{children:(0,t.jsxs)(n.p,{children:["git clone -b ",s.$.version," ",(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/shellhub.git",children:"https://github.com/shellhub-io/shellhub.git"})," shellhub"]})}),"\n",(0,t.jsx)(n.p,{children:"Next, we need to execute the following command to build ShellHub Agent:"}),"\n",(0,t.jsx)("pre",{children:(0,t.jsx)(n.p,{children:"cd shellhub/agent"})}),"\n",(0,t.jsx)("pre",{children:(0,t.jsxs)(n.p,{children:['go build -ldflags "-X main.AgentVersion=',s.$.version,'"']})}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"file ./agent"})," to check if executable was built."]}),"\n",(0,t.jsx)(n.h2,{id:"integrate-into-an-existing-yocto-project-image",children:"Integrate into an existing Yocto Project image"}),"\n",(0,t.jsxs)(n.p,{children:["To use ShellHub in a Yocto Project image is necessary to add ",(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/meta-shellhub",children:"meta-shellhub"}),"\nlayer in your project."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"git clone git@github.com:shellhub-io/meta-shellhub.git\n"})}),"\n",(0,t.jsx)(n.p,{children:"Add the settings below in your local.conf file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'CORE_IMAGE_EXTRA_INSTALL += "packagegroup-shellhub-runtime"\nSHELLHUB_TENANT_ID = "<your tenant id here>"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Where:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"CORE_IMAGE_EXTRA_INSTALL"}),": this variable will install the ShellHub agent in your image."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SHELLHUB_TENANT_ID"}),": needs to be filled with your tenant id."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Remember to add the other configurations according to your needs. After this, just generate the desired image."}),"\n",(0,t.jsx)(n.h3,{id:"optional-variables",children:"Optional variables"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SHELLHUB_SERVER_ADDRESS"}),": ShellHub instance server addresss (default: ",(0,t.jsx)(n.a,{href:"https://cloud.shellhub.io",children:"https://cloud.shellhub.io"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"supported-yocto-releases",children:"Supported Yocto releases"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/meta-shellhub/tree/master",children:"Dunfell"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/meta-shellhub/tree/zeus",children:"Zeus"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/meta-shellhub/tree/sumo",children:"Sumo"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/shellhub-io/meta-shellhub/tree/rocko",children:"Rocko"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},4769:(e,n,i)=>{i.d(n,{$:()=>t});const t={version:"v0.18.0"}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var t=i(6540);const l={},s=t.createContext(l);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);